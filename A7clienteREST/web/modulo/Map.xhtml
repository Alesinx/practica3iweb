<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui">
	
	<h:head>
    	<title>Geolocalización de los modulos</title>
    	    
    	<style>
      		#map {
      			height: 100%;
      		}
      		html, body {
        		height: 100%;
        		margin: 0;
        		padding: 0;
      		}
    	</style>
  	</h:head>
  
  	<h:body>
        <b:navBar brand="PVTranslator" brandHref="http://localhost:8080/A7clienteREST/faces/modulo/index.xhtml"></b:navBar>
    	<div id="map" ></div>
		<h:button>
		</h:button>
	    <script>
      		function initMap() {
        		var map = new google.maps.Map(document.getElementById('map'), {
          			center: {lat: 39.6482283, lng: -4.5950447},
          			zoom: 6.5
        		});
			
				//esta función añade marcadores, loopear por cada módulo pasando location
				function addMarker(location, map) {
            			var marker = new google.maps.Marker({
	            			position: location,
	            		    map: map,
		          			draggable: false,
		          			animation: google.maps.Animation.DROP
	            		});
	            }
				//PONER UN BOTÓN
	        	//esta funcion centra el mapa en un sitio y hace zoom pasando una localizacion como parametro
                               var x =<h:outputText value="#{modulosBean.moduloJson}"/>;
                               console.log(x);
                               
                                i=0;
                                for(y in x){
                                    console.log(x[y].lat);
                                    var myLatlng = new google.maps.LatLng(parseFloat(x[y].lat),parseFloat(x[y].lng));
                                    addMarker(myLatlng,map);
                                }
                                

                                
				
				
      		}          	  		
      	</script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaMjDk7XxSrJN-AhxAKqv6GrReFZG_3gQ&amp;callback=initMap"></script>
  	</h:body>
</html>